<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
<style type="text/css">
body{background:#bfd1e5;margin:0;overflow:hidden}#dlbtn{bottom:1vmax;height:5vmax;position:absolute;right:1vmax;width:5vmax}#dlbtn:not([href]){display:none}svg .a{fill:#7396c2}svg .b{opacity:.2}svg .c{fill:#231f20}svg .d{fill:#fff}
</style>
<title>3D file viewer - FACER2VM</title>
</head>
<body data-root="data/" x-data-root="//files.facer2vm.org/view/">

<div id="container"></div>
<a id="dlbtn"><svg x="0px" y="0px" viewBox="0 0 64 64" style="enable-background:new 0 0 64 64;"><g><g><circle class="a" cx="32" cy="32" r="32"/></g><g class="b"><path class="c" d="M47.8,30H40V18c0-2.2-1.8-4-4-4h-8c-2.2,0-4,1.8-4,4v12h-7.8c-2.7,0-3.5,1.9-1.7,4.1l14.3,18.1 c1.8,2.3,4.7,2.3,6.5,0l14.3-18.1C51.3,31.9,50.6,30,47.8,30z"/></g><g><path class="d" d="M24,16c0-2.2,1.8-4,4-4h8c2.2,0,4,1.8,4,4v24c0,2.2-1.8,4-4,4h-8c-2.2,0-4-1.8-4-4V16z"/></g><g><path class="d" d="M47.8,28c2.7,0,3.5,1.9,1.7,4.1L35.3,50.3c-1.8,2.3-4.7,2.3-6.5,0L14.5,32.1c-1.8-2.3-1-4.1,1.7-4.1H47.8z"/></g></g></svg></a>

<script src="//threejs.org/build/three.min.js"></script>
<script type="text/javascript">
THREE.OrbitControls=function(L,M){this.object=L;this.domElement=(M!==undefined)?M:document;this.enabled=true;this.target=new THREE.Vector3();this.minDistance=0;this.maxDistance=Infinity;this.minZoom=0;this.maxZoom=Infinity;this.minPolarAngle=0;this.maxPolarAngle=Math.PI;this.minAzimuthAngle=-Infinity;this.maxAzimuthAngle=Infinity;this.enableDamping=false;this.dampingFactor=0.25;this.enableZoom=true;this.zoomSpeed=1;this.enableRotate=true;this.rotateSpeed=1;this.enablePan=true;this.panSpeed=1;this.screenSpacePanning=false;this.keyPanSpeed=7;this.autoRotate=false;this.autoRotateSpeed=2;this.enableKeys=true;this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT};this.target0=this.target.clone();this.position0=this.object.position.clone();this.zoom0=this.object.zoom;this.getPolarAngle=function(){return Q.phi};this.getAzimuthalAngle=function(){return Q.theta};this.saveState=function(){J.target0.copy(J.target);J.position0.copy(J.object.position);J.zoom0=J.object.zoom};this.reset=function(){J.target.copy(J.target0);J.object.position.copy(J.position0);J.object.zoom=J.zoom0;J.object.updateProjectionMatrix();J.dispatchEvent(W);J.update();ac=e.NONE};this.update=function(){var ah=new THREE.Vector3();var af=new THREE.Quaternion().setFromUnitVectors(L.up,new THREE.Vector3(0,1,0));var ag=af.clone().inverse();var ae=new THREE.Vector3();var ad=new THREE.Quaternion();return function ai(){var aj=J.object.position;ah.copy(aj).sub(J.target);ah.applyQuaternion(af);Q.setFromVector3(ah);if(J.autoRotate&&ac===e.NONE){x(f())}Q.theta+=i.theta;Q.phi+=i.phi;Q.theta=Math.max(J.minAzimuthAngle,Math.min(J.maxAzimuthAngle,Q.theta));Q.phi=Math.max(J.minPolarAngle,Math.min(J.maxPolarAngle,Q.phi));Q.makeSafe();Q.radius*=F;Q.radius=Math.max(J.minDistance,Math.min(J.maxDistance,Q.radius));J.target.add(R);ah.setFromSpherical(Q);ah.applyQuaternion(ag);aj.copy(J.target).add(ah);J.object.lookAt(J.target);if(J.enableDamping===true){i.theta*=(1-J.dampingFactor);i.phi*=(1-J.dampingFactor);R.multiplyScalar(1-J.dampingFactor)}else{i.set(0,0,0);R.set(0,0,0)}F=1;if(H||ae.distanceToSquared(J.object.position)>c||8*(1-ad.dot(J.object.quaternion))>c){J.dispatchEvent(W);ae.copy(J.object.position);ad.copy(J.object.quaternion);H=false;return true}return false}}();this.dispose=function(){J.domElement.removeEventListener("contextmenu",D,false);J.domElement.removeEventListener("mousedown",V,false);J.domElement.removeEventListener("wheel",O,false);J.domElement.removeEventListener("touchstart",U,false);J.domElement.removeEventListener("touchend",N,false);J.domElement.removeEventListener("touchmove",X,false);document.removeEventListener("mousemove",a,false);document.removeEventListener("mouseup",aa,false);window.removeEventListener("keydown",j,false)};var J=this;var W={type:"change"};var P={type:"start"};var C={type:"end"};var e={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4};var ac=e.NONE;var c=0.000001;var Q=new THREE.Spherical();var i=new THREE.Spherical();var F=1;var R=new THREE.Vector3();var H=false;var z=new THREE.Vector2();var s=new THREE.Vector2();var K=new THREE.Vector2();var d=new THREE.Vector2();var v=new THREE.Vector2();var q=new THREE.Vector2();var w=new THREE.Vector2();var b=new THREE.Vector2();var I=new THREE.Vector2();function f(){return 2*Math.PI/60/60*J.autoRotateSpeed}function G(){return Math.pow(0.95,J.zoomSpeed)}function x(ad){i.theta-=ad}function B(ad){i.phi-=ad}var p=function(){var ad=new THREE.Vector3();return function ae(ag,af){ad.setFromMatrixColumn(af,0);ad.multiplyScalar(-ag);R.add(ad)}}();var A=function(){var ad=new THREE.Vector3();return function ae(ag,af){if(J.screenSpacePanning===true){ad.setFromMatrixColumn(af,1)}else{ad.setFromMatrixColumn(af,0);ad.crossVectors(J.object.up,ad)}ad.multiplyScalar(ag);R.add(ad)}}();var n=function(){var ae=new THREE.Vector3();return function ad(ah,ag){var ai=J.domElement===document?J.domElement.body:J.domElement;if(J.object.isPerspectiveCamera){var af=J.object.position;ae.copy(af).sub(J.target);var aj=ae.length();aj*=Math.tan((J.object.fov/2)*Math.PI/180);p(2*ah*aj/ai.clientHeight,J.object.matrix);A(2*ag*aj/ai.clientHeight,J.object.matrix)}else{if(J.object.isOrthographicCamera){p(ah*(J.object.right-J.object.left)/J.object.zoom/ai.clientWidth,J.object.matrix);A(ag*(J.object.top-J.object.bottom)/J.object.zoom/ai.clientHeight,J.object.matrix)}else{console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.");J.enablePan=false}}}}();function r(ad){if(J.object.isPerspectiveCamera){F/=ad}else{if(J.object.isOrthographicCamera){J.object.zoom=Math.max(J.minZoom,Math.min(J.maxZoom,J.object.zoom*ad));J.object.updateProjectionMatrix();H=true}else{console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.");J.enableZoom=false}}}function t(ad){if(J.object.isPerspectiveCamera){F*=ad}else{if(J.object.isOrthographicCamera){J.object.zoom=Math.max(J.minZoom,Math.min(J.maxZoom,J.object.zoom/ad));J.object.updateProjectionMatrix();H=true}else{console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.");J.enableZoom=false}}}function u(ad){z.set(ad.clientX,ad.clientY)}function T(ad){w.set(ad.clientX,ad.clientY)}function E(ad){d.set(ad.clientX,ad.clientY)}function o(ae){s.set(ae.clientX,ae.clientY);K.subVectors(s,z).multiplyScalar(J.rotateSpeed);var ad=J.domElement===document?J.domElement.body:J.domElement;x(2*Math.PI*K.x/ad.clientHeight);B(2*Math.PI*K.y/ad.clientHeight);z.copy(s);J.update()}function ab(ad){b.set(ad.clientX,ad.clientY);I.subVectors(b,w);if(I.y>0){r(G())}else{if(I.y<0){t(G())}}w.copy(b);J.update()}function l(ad){v.set(ad.clientX,ad.clientY);q.subVectors(v,d).multiplyScalar(J.panSpeed);n(q.x,q.y);d.copy(v);J.update()}function Z(ad){}function S(ad){if(ad.deltaY<0){t(G())}else{if(ad.deltaY>0){r(G())}}J.update()}function h(ad){switch(ad.keyCode){case J.keys.UP:n(0,J.keyPanSpeed);J.update();break;case J.keys.BOTTOM:n(0,-J.keyPanSpeed);J.update();break;case J.keys.LEFT:n(J.keyPanSpeed,0);J.update();break;case J.keys.RIGHT:n(-J.keyPanSpeed,0);J.update();break}}function k(ad){z.set(ad.touches[0].pageX,ad.touches[0].pageY)}function Y(ag){if(J.enableZoom){var af=ag.touches[0].pageX-ag.touches[1].pageX;var ae=ag.touches[0].pageY-ag.touches[1].pageY;var ai=Math.sqrt(af*af+ae*ae);w.set(0,ai)}if(J.enablePan){var ad=0.5*(ag.touches[0].pageX+ag.touches[1].pageX);var ah=0.5*(ag.touches[0].pageY+ag.touches[1].pageY);d.set(ad,ah)}}function m(ae){s.set(ae.touches[0].pageX,ae.touches[0].pageY);K.subVectors(s,z).multiplyScalar(J.rotateSpeed);var ad=J.domElement===document?J.domElement.body:J.domElement;x(2*Math.PI*K.x/ad.clientHeight);B(2*Math.PI*K.y/ad.clientHeight);z.copy(s);J.update()}function y(ag){if(J.enableZoom){var af=ag.touches[0].pageX-ag.touches[1].pageX;var ae=ag.touches[0].pageY-ag.touches[1].pageY;var ai=Math.sqrt(af*af+ae*ae);b.set(0,ai);I.set(0,Math.pow(b.y/w.y,J.zoomSpeed));r(I.y);w.copy(b)}if(J.enablePan){var ad=0.5*(ag.touches[0].pageX+ag.touches[1].pageX);var ah=0.5*(ag.touches[0].pageY+ag.touches[1].pageY);v.set(ad,ah);q.subVectors(v,d).multiplyScalar(J.panSpeed);n(q.x,q.y);d.copy(v)}J.update()}function g(ad){}function V(ad){if(J.enabled===false){return}ad.preventDefault();switch(ad.button){case J.mouseButtons.ORBIT:if(J.enableRotate===false){return}u(ad);ac=e.ROTATE;break;case J.mouseButtons.ZOOM:if(J.enableZoom===false){return}T(ad);ac=e.DOLLY;break;case J.mouseButtons.PAN:if(J.enablePan===false){return}E(ad);ac=e.PAN;break}if(ac!==e.NONE){document.addEventListener("mousemove",a,false);document.addEventListener("mouseup",aa,false);J.dispatchEvent(P)}}function a(ad){if(J.enabled===false){return}ad.preventDefault();switch(ac){case e.ROTATE:if(J.enableRotate===false){return}o(ad);break;case e.DOLLY:if(J.enableZoom===false){return}ab(ad);break;case e.PAN:if(J.enablePan===false){return}l(ad);break}}function aa(ad){if(J.enabled===false){return}Z(ad);document.removeEventListener("mousemove",a,false);document.removeEventListener("mouseup",aa,false);J.dispatchEvent(C);ac=e.NONE}function O(ad){if(J.enabled===false||J.enableZoom===false||(ac!==e.NONE&&ac!==e.ROTATE)){return}ad.preventDefault();ad.stopPropagation();J.dispatchEvent(P);S(ad);J.dispatchEvent(C)}function j(ad){if(J.enabled===false||J.enableKeys===false||J.enablePan===false){return}h(ad)}function U(ad){if(J.enabled===false){return}ad.preventDefault();switch(ad.touches.length){case 1:if(J.enableRotate===false){return}k(ad);ac=e.TOUCH_ROTATE;break;case 2:if(J.enableZoom===false&&J.enablePan===false){return}Y(ad);ac=e.TOUCH_DOLLY_PAN;break;default:ac=e.NONE}if(ac!==e.NONE){J.dispatchEvent(P)}}function X(ad){if(J.enabled===false){return}ad.preventDefault();ad.stopPropagation();switch(ad.touches.length){case 1:if(J.enableRotate===false){return}if(ac!==e.TOUCH_ROTATE){return}m(ad);break;case 2:if(J.enableZoom===false&&J.enablePan===false){return}if(ac!==e.TOUCH_DOLLY_PAN){return}y(ad);break;default:ac=e.NONE}}function N(ad){if(J.enabled===false){return}g(ad);J.dispatchEvent(C);ac=e.NONE}function D(ad){if(J.enabled===false){return}ad.preventDefault()}J.domElement.addEventListener("contextmenu",D,false);J.domElement.addEventListener("mousedown",V,false);J.domElement.addEventListener("wheel",O,false);J.domElement.addEventListener("touchstart",U,false);J.domElement.addEventListener("touchend",N,false);J.domElement.addEventListener("touchmove",X,false);window.addEventListener("keydown",j,false);this.update()};THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.OrbitControls.prototype.constructor=THREE.OrbitControls;Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){console.warn("THREE.OrbitControls: .center has been renamed to .target");return this.target}},noZoom:{get:function(){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");return !this.enableZoom},set:function(a){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");this.enableZoom=!a}},noRotate:{get:function(){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");return !this.enableRotate},set:function(a){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");this.enableRotate=!a}},noPan:{get:function(){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");return !this.enablePan},set:function(a){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.");this.enablePan=!a}},noKeys:{get:function(){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");return !this.enableKeys},set:function(a){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");this.enableKeys=!a}},staticMoving:{get:function(){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");return !this.enableDamping},set:function(a){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");this.enableDamping=!a}},dynamicDampingFactor:{get:function(){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");return this.dampingFactor},set:function(a){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");this.dampingFactor=a}}});THREE.ImageDataLoader=(function(){function a(f,e,j){var h=e.length;var k=e.map(function(i){return -i});var g=new Float32Array(f);for(var d=0,c=g.length;d<c;d+=h){g.set(k,d)}return{data:g,addData:function(m,q,p){var l=j.map(function(i){return Math.pow(2,i-q*8-8)});p=p||4;for(var r=0,o=0;r<f;r+=h,o+=p){for(var n=0;n<h;n++){g[r+n]+=m[o+n]*l[n]}}},addImageData:function(n,l){var i=document.createElement("canvas");var m=i.getContext("2d");i.width=n.width;i.height=n.height;m.drawImage(n,0,0);var o=m.getImageData(0,0,n.width,n.height).data;this.addData(o,l,4)}}}function b(c){this.manager=(c!==undefined)?c:THREE.DefaultLoadingManager}Object.assign(b.prototype,{constructor:b,crossOrigin:"Anonymous",load:function(h,d,i,k,f){var l=d.resolution[0]*d.resolution[1];var g=d.offset.length;var e=new a(l*g,d.offset,d.scale);var j=new THREE.ImageLoader(this.manager);var c=0;j.setCrossOrigin(this.crossOrigin);j.setPath(this.path);if(typeof h==="string"){h=[h]}c=h.length;h.forEach(function(n,m){j.load(n,function(o){e.addImageData(o,m);if(k!==undefined){k(e.data)}if(--c===0){i(e.data);delete e}},undefined,f)})},setCrossOrigin:function(c){this.crossOrigin=c;return this},setPath:function(c){this.path=c;return this}});return b})();THREE.MapLoader=(function(){function a(b){this.manager=(b!==undefined)?b:THREE.DefaultLoadingManager}Object.assign(a.prototype,{constructor:a,withCredentials:false,load:function(c,e,g,f){var d=this;var b=new THREE.FileLoader(this.manager);b.setPath(this.path);b.setWithCredentials(this.withCredentials);b.load(c,function(i){var h=JSON.parse(i);var j=d.parse(h);if(e!==undefined){e(j)}},g,f)},parse:function(c){var f=new THREE.TextureLoader(this.manager);var d=new THREE.MeshBasicMaterial();f.setPath(this.path);d.map=f.load(c.texture);var b=new THREE.ImageDataLoader(this.manager);var h=new THREE.PlaneBufferGeometry(1<<c.scale[0]-1,1<<c.scale[1]-1,c.resolution[0]-1,c.resolution[1]-1);b.setPath(this.path);b.load(c.shape,c,e,g);return new THREE.Mesh(h,d);function g(i){h.attributes.position.array.set(i);h.attributes.position.needsUpdate=true}function e(i){h.attributes.position;h.computeBoundingBox();h.computeVertexNormals()}},setPath:function(b){this.path=b;return this},setWithCredentials:function(b){this.withCredentials=b;return this}});return a})();(function(){var d;var b;var e;var g;h();a();function h(){var k=document.getElementById("container");var o=document.getElementById("dlbtn");g=new THREE.Scene();g.background=new THREE.Color(12571109);if(location.hash){var j=document.body.dataset.root;var i=new THREE.MapLoader();var l=location.hash.substr(1).match(/[\w-]*/)[0];var n=l+".map";var m=l+".zip";i.setPath(j);i.load(n,function(p){g.add(p)});o.href=j+m}d=new THREE.PerspectiveCamera(50,4/3,1,20000);d.position.z=400;d.up=new THREE.Vector3(0,1,0);d.lookAt(g.position);e=new THREE.WebGLRenderer({antialias:true});e.setPixelRatio(window.devicePixelRatio);e.setSize(400,300);b=new THREE.OrbitControls(d,e.domElement);b.addEventListener("change",c);k.innerHTML="";k.appendChild(e.domElement);window.addEventListener("resize",f,false);f()}function f(){var i=window.innerWidth;var j=window.innerHeight;d.aspect=i/j;d.updateProjectionMatrix();e.setSize(i,j)}function a(){requestAnimationFrame(a);c()}function c(){e.render(g,d)}})();
</script>

</body>
</html>
